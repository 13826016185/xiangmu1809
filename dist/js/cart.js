"use strict";$(function(){var i=[];function c(e){var c=e.parent().find("input").val(),t=e.parent().prev().text(),n=(c*(t=(t=$.trim(t)).substring(1))).toFixed(0);console.log(n),e.parent().next().html("$&nbsp;"+n),o()}function t(){0==$(".addnum").size()&&$("#del").css("display","none")}$("#cart").on("click",".addnum",function(){var e=$(this).prev().val();100<=++e&&(e=100),$(this).prev().val(e),c($(this))}),$("#cart").on("click",".cutnum",function(){var e=$(this).next().val();--e<=1&&(e=1),$(this).next().val(e),c($(this))}),$("#cart").on("click",".good_del",function(){confirm("您确定要删除该行吗？")&&$(this).parent().remove(),t(),o()});var e=!0;function o(){i.length=0;for(var e=$(".good_check input").size(),c=0;c<e;c++)$(".good_check input").eq(c).prop("checked")&&i.push(c);var t=0,n=0;for(c=0;c<i.length;c++){t+=1*$(".nownum").eq(i[c]).val();var o=$(".good_total").eq(i[c]).text();n+=o=1*(o=$.trim(o)).substring(1)}$("#allnum").html("已选 "+t+" 件商品"),$("#allnum1").html("商品清单（"+t+" ）"),$("#totalprice").html("总计（不含运费）：￥ "+n.toFixed(2))}$("#allchecked").on("click",function(){e?($(this).find("input").prop("checked","checked"),$(".good_check input").prop("checked","checked")):($(this).find("input").removeAttr("checked"),$(".good_check input").removeAttr("checked")),e=!e,o()}),$("#cart").on("click",".good_check input",function(){o(),e=i.length==$(".good_check").size()?($("#allchecked input").prop("checked","checked"),!1):($("#allchecked input").removeAttr("checked"),!0)}),$("#delall").on("click",function(){if(o(),confirm("您确定要删除多行吗？"))for(var e=i.length-1;0<=e;e--)$(".good_check").eq(i[e]).parent().remove();t()}),$("#cart").on("blur",".nownum",function(){c($(this)),o()})});